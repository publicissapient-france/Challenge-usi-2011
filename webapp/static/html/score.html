<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <script type="text/javascript" src="../script/jquery-1.3.2.js"></script>
    <script type="text/javascript" src="../script/jquery.json-1.3.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" media="screen" href="../css/usi.css">
    <title>List player</title>
</head>
<body>
<div id="content-score">

</div>
</body>
</html>

<script type="text/javascript">
    $(document).ready(function() {
        $.ajax({ url: "/api/score/" + window.location.href.slice(window.location.href.indexOf('?')), dataType:"json",
            error: function(req, status, errorThrown) {
                alert(status);
            },
            success: function(data) {
                var table = $('<table id="outputTable"><tbody></tbody></table>'), reftBody = $(table).find('tbody');
                // On met ce qui sont avant
                $.each(data.before.mail, function(i, item) {
                    var td_score = $('<td>')
                            .text(data.before.scores[i]);
                    var td_email = $('<td>')
                            .text(item);
                    var td_firstname = $('<td>')
                            .text(data.before.firstname[i]);
                    var td_lastname = $('<td>')
                            .text(data.before.lastname[i]);

                    var tr = $('<tr>').append(td_score).append(td_email).append(td_firstname).append(td_lastname);

                    // append tr
                    $(reftBody).append(tr);

                    // append table with tbody
                    $("#content-score").append(table);

                });
                // On met le joueur courant

                // Ceux qui sont apres
                $.each(data.after.mail, function(i, item) {
                    var td_score = $('<td>')
                            .text(data.after.scores[i]);
                    var td_email = $('<td>')
                            .text(item);
                    var td_firstname = $('<td>')
                            .text(data.after.firstname[i]);
                    var td_lastname = $('<td>')
                            .text(data.after.lastname[i]);

                    var tr = $('<tr>').append(td_score).append(td_email).append(td_firstname).append(td_lastname);

                    // append tr
                    $(reftBody).append(tr);

                    // append table with tbody
                    $("#content-score").append(table);

                });

            }
        });
    });
</script>